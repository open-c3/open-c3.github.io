<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="lijinfeng2011@gmail.com">
        <link rel="canonical" href="https://www.open-c3.online/user-guide/%E4%B8%BB%E6%9C%BA%E5%9F%BA%E7%A1%80%E7%9B%91/">
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>1 主机基础监控 - Open-C3</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/fontawesome.min.css" rel="stylesheet">
        <link href="../../css/brands.min.css" rel="stylesheet">
        <link href="../../css/solid.min.css" rel="stylesheet">
        <link href="../../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">Open-C3</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item">
                                <a href="../.." class="nav-link">首页</a>
                            </li>
                            <li class="nav-item">
                                <a href="../../getting-started/" class="nav-link">快速开始</a>
                            </li>
                            <li class="nav-item">
                                <a href="../" class="nav-link">用户指南</a>
                            </li>
                            <li class="nav-item">
                                <a href="../../dev-guide/" class="nav-link">开发指南</a>
                            </li>
                            <li class="nav-item">
                                <a href="../../%E6%BC%94%E7%A4%BA%E7%8E%AF%E5%A2%83/" class="nav-link">演示环境</a>
                            </li>
                            <li class="nav-item">
                                <a href="../../video-tutorials/" class="nav-link">视频教程</a>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">关于</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../about/%E8%81%94%E7%B3%BB%E6%88%91%E4%BB%AC/" class="dropdown-item">联系我们</a>
</li>
                                    
<li>
    <a href="../../about/%E6%AC%A2%E8%BF%8E%E5%8F%82%E4%B8%8E%E8%B4%A1%E7%8C%AE/" class="dropdown-item">欢迎参与贡献</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a href="https://github.com/open-c3/docs/blob/main/docs/user-guide/主机基础监.md" class="nav-link"><i class="fa-brands fa-github"></i> Edit on GitHub</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#1" class="nav-link">1 主机基础监控</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#11-agent" class="nav-link">1.1 安装AGENT</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#12" class="nav-link">1.2 监控看板</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#13" class="nav-link">1.3 配置消息出口</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#14" class="nav-link">1.4 消息模版</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#15" class="nav-link">1.5 消息总开关</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#16" class="nav-link">1.6 地址簿管理</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#17" class="nav-link">1.7 监控策略</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#18" class="nav-link">1.8 配置告警接收人</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#19" class="nav-link">1.9 接收告警</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#110" class="nav-link">1.10 查看当前告警列表</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#111" class="nav-link">1.11 总结</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="1">1 主机基础监控</h1>
<p>主机监控是一个最常见的监控类型。根据主机监控的添加，能更好的理解监控系统的整个配置过程。</p>
<h2 id="11-agent">1.1 安装AGENT</h2>
<p>打开”业务管理”-&gt;”代理设置(AGENT安装)”页面。</p>
<p><img alt="" src="/attachments/Pasted_image_20250707122006.png" /></p>
<p>根据截图中的链接，安装Open-C3 AGENT。</p>
<p>注： 安装过程会自动匹配密钥，也就是说，你用哪个Open-C3的安装链接安装的Agent，哪个Open-C3就有权限调用该Agent主机。</p>
<h2 id="12">1.2 监控看板</h2>
<p>安装完后，我们可以到“监控”-&gt;”监控看板”中查看资源的监控看板。Open-C3会根据你点击的服务树的深度，显示不一样的看板。</p>
<p><img alt="" src="/attachments/20250706221017_wps23.jpg" /> </p>
<p><img alt="" src="/attachments/20250706221017_wps24.jpg" /> </p>
<h2 id="13">1.3 配置消息出口</h2>
<p>Open-C3系统会对外发送三种消息，邮件、短信（短信、飞书消息、钉钉消息等都归为同一类）、语言电话。</p>
<p>同时Open-C3提供了不同的方式对接。主要分为连接器对接和直接对接。连接器对接是设想企业中应该有发送这三类消息的接口，把这些接口配置到Open-C3的连接器配置中即可【当然需要符合Open-C3的接口格式要求】。</p>
<h3 id="_1">连接器对接方式</h3>
<p>到“管理”-&gt;”设置连接器”页面设置消息出口。</p>
<p><img alt="" src="/attachments/20250706221017_wps25.jpg" /> </p>
<p>消息出口需要appname和appkey完成验证【添加http的Header】。</p>
<p>I ) 邮件</p>
<pre><code>配置的地址示例:

http://api.connector.open-c3.org/default/mail

调用方式：POST

参数

user：用户名，接口需要自己查询对应的用户的邮箱地址

title: 邮件标题

content: 邮件内容
</code></pre>
<p>返回：{ stat： true }</p>
<p>II ) 短信</p>
<pre><code>配置的地址如下:

http://api.connector.open-c3.org/default/mesg

调用方式：POST

参数

user：用户名，接口需要自己查询对应的用户的手机号

mesg: 短信内容

</code></pre>
<p>返回：{ stat： true }</p>
<p><strong>III )</strong> <strong>语</strong><strong>音</strong></p>
<pre><code>配置的地址如下:

http://api.connector.open-c3.org/default/mesg

#使用内置是和短信接口一样

调用方式：POST

参数

user：用户名，接口需要自己查询对应的用户的手机号

mesg: 语音内容
</code></pre>
<p>返回：{ stat： true }</p>
<p>直接对接方式</p>
<p>I ) 邮件</p>
<p>到“管理”-&gt;”系统参数”配置邮件配置。</p>
<p><img alt="" src="/attachments/20250706221017_wps26.jpg" /> </p>
<p>II ) 短信</p>
<p>短信目前支持飞书、钉钉、Lark</p>
<ul>
<li>钉钉：</li>
</ul>
<p><img alt="" src="/attachments/20250706221017_wps27.jpg" /> </p>
<ul>
<li>飞书：</li>
</ul>
<p>飞书到配置文件 /data/open-c3-data/sysctl.conf 中配置 sys.send.feishu.app_id 和 sys.send.feishu.app_secret 字段</p>
<ul>
<li>Lark：</li>
</ul>
<p>Lark到配置文件 /data/open-c3-data/sysctl.conf 中配置 sys.send.lark.app_id 和 sys.send.lark.app_secret字段</p>
<p>III ) 语音</p>
<p>语言目前只支持连接器对接的方式。</p>
<h2 id="14">1.4 消息模版</h2>
<p>如果不配置模版，发送出来的内容会很简单。这里需要到“管理”-&gt;”模版管理”页面配置一下告警消息的模版。</p>
<p>如果不想做太多调整，直接点击右上角的复制模版按钮，复制出标准模版然后保存即可。</p>
<p><img alt="" src="/attachments/20250706221017_wps28.jpg" /> </p>
<h2 id="15">1.5 消息总开关</h2>
<p>系统设计了消息总开关，确保消息开关是开启的状态，到“管理”-&gt;”通知管理”把告警系统的全部勾选上。</p>
<p><img alt="" src="/attachments/20250706221017_wps29.jpg" /> </p>
<h2 id="16">1.6 地址簿管理</h2>
<p>在“配置消息出口”章节中，我们定义了三个消息出口。当我们在配置告警的时候，最简单的例子是我们通过用户名称来配置告警接收人，比如 zhangsan 。</p>
<p>系统在把消息往外发送之前，会在地址簿里面查找有没有定义该用户的地址簿。如果有，会根据地址簿中的配置做一层转换。</p>
<p>举个例子：</p>
<p>当前短信出口，我们用的是连接器的方式。如果不配置地址簿，当我们给zhangsan发送短信消息的时候，传递给短信接口的用户这个字段的内容是“zhangsan”。 这样就要靠短信接口自己寻找zhangsan的手机号然后发送短信。这个也是合理的方式，有的企业的消息出口就是根据用户名来发送消息的，他们会查询自己公司的OA系统来找用户的手机号然后发送消息。 但是如果我们配置了地址簿，比如地址簿中我配置了zhangsan的手机号是133xxxxxxxx , 那么在调用短信接口的时候，用户的字段就变成133xxxxxxxx。</p>
<p>同时，系统提供了一下简单的消息发送的方式，比如飞书机器人，这个不需要预先配置任何东西，在飞书上创建机器人后，在地址簿的消息</p>
<p><img alt="" src="/attachments/20250706221017_wps30.jpg" /> </p>
<h2 id="17">1.7 监控策略</h2>
<p>在对应服务树上配置监控策略，进到“监控”-&gt; “监控配置”页面，点击对应的服务树。监控策略是配置在服务树上的，资源也是挂载到服务树上。 所以正常情况下，你想这个策略监控哪个服务树上的资源，就到那个服务树上配置监控策略。</p>
<p>注： ROOT节点的服务树不允许配置监控策略。</p>
<p>首次使用，可以直接从“通过模版添加监控策略”来导入一些常用的监控策略。</p>
<p><img alt="" src="/attachments/20250706221017_wps31.jpg" /> </p>
<h2 id="18">1.8 配置告警接收人</h2>
<p>监控策略是绑定在服务树上的，告警接收人也是绑定在服务树上的。所以想接收哪个服务树上的告警，就到“监控”-&gt;“监控配置”中添加保荐人即可。 这里可以填写地址簿中之前添加的用户。</p>
<p><img alt="" src="/attachments/20250706221017_wps32.jpg" /> </p>
<h2 id="19">1.9  接收告警</h2>
<p>通过上述配置后，当告警发生的时候，就会收到对应的邮件、短信、电话语言。下面是飞书收到消息的例子。</p>
<p><img alt="" src="/attachments/20250706221017_wps33.jpg" width="50%" /> </p>
<h2 id="110">1.10  查看当前告警列表</h2>
<p>可以到“监控”-&gt; “当前告警”页面查看当前正在发生的告警。</p>
<p><img alt="" src="/attachments/20250706221017_wps34.jpg" /> 
（当前告警页面）</p>
<h2 id="111">1.11  总结</h2>
<p>这个章节我们主要讲了主机监控的配置，为了更简洁与连贯，我们没有展开讲关于告警组、策略分组、策略的不同配置方式等。</p></div>
            </div>
        </div>

        <footer class="col-md-12">
  <footer style="text-align: center; font-size: 0.9em; color: #FFF; padding: 1em;background-color: #3eaae9;">
    OPEN-C3 © 2025
  </footer>

        </footer>
        <script src="../../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js"></script>
        <script src="../../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
